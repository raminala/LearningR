---
title: Time Series Analysis in R
author: ''
date: '2021-10-27'
slug: time-series-analysis-in-r
categories: []
tags:
  - Time Series
---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>


<pre class="r"><code> library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.3     v purrr   0.3.4
## v tibble  3.1.2     v dplyr   1.0.6
## v tidyr   1.1.3     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>Nile &lt;- ts(read.csv(&quot;Nile.csv&quot;), start = 1871 , end = 1970, frequency = 1)
class(Nile)</code></pre>
<pre><code>## [1] &quot;ts&quot;</code></pre>
<div id="course-description" class="section level2">
<h2>Course Description</h2>
<p>Many phenomena in our day-to-day lives, such as the movement of stock prices, are measured in intervals over a period of time. Time series analysis methods are extremely useful for analyzing these special data types. In this course, you will be introduced to some core time series analysis concepts and techniques.</p>
</div>
<div id="exploratory-time-series-data-analysis" class="section level2">
<h2>1- Exploratory time series data analysis</h2>
<p>This chapter will give you insights on how to organize and visualize time series data in R. You will learn several simplifying assumptions that are widely used in time series analysis, and common characteristics of financial time series.</p>
</div>
<div id="exploring-raw-time-series" class="section level2">
<h2>1-2 Exploring raw time series</h2>
<p>The most common first step when conducting time series analysis is to display your time series dataset in a visually intuitive format. The most useful way to view raw time series data in R is to use the print() command, which displays the Start, End, and Frequency of your data along with the observations.</p>
<p>Another useful command for viewing time series data in R is the length() function, which tells you the total number of observations in your data.</p>
<p>Some datasets are very long, and previewing a subset of data is more suitable than displaying the entire series. The head(<strong><em>, n =</em></strong>) and tail(<strong><em>, n =</em></strong>) functions, in which n is the number of items to display, focus on the first and last few elements of a given dataset respectively.</p>
<p>In this exercise, you’ll explore the famous River Nile annual streamflow data, Nile. This time series dataset includes some metadata information. When calling print(Nile), note that Start = 1871 indicates that 1871 is the year of the first annual observation, and End = 1970 indicates 1970 is the year of the last annual observation.</p>
<pre class="r"><code># Print the Nile dataset
print(Nile)</code></pre>
<pre><code>## Time Series:
## Start = 1871 
## End = 1970 
## Frequency = 1 
##           x
##   [1,] 1120
##   [2,] 1160
##   [3,]  963
##   [4,] 1210
##   [5,] 1160
##   [6,] 1160
##   [7,]  813
##   [8,] 1230
##   [9,] 1370
##  [10,] 1140
##  [11,]  995
##  [12,]  935
##  [13,] 1110
##  [14,]  994
##  [15,] 1020
##  [16,]  960
##  [17,] 1180
##  [18,]  799
##  [19,]  958
##  [20,] 1140
##  [21,] 1100
##  [22,] 1210
##  [23,] 1150
##  [24,] 1250
##  [25,] 1260
##  [26,] 1220
##  [27,] 1030
##  [28,] 1100
##  [29,]  774
##  [30,]  840
##  [31,]  874
##  [32,]  694
##  [33,]  940
##  [34,]  833
##  [35,]  701
##  [36,]  916
##  [37,]  692
##  [38,] 1020
##  [39,] 1050
##  [40,]  969
##  [41,]  831
##  [42,]  726
##  [43,]  456
##  [44,]  824
##  [45,]  702
##  [46,] 1120
##  [47,] 1100
##  [48,]  832
##  [49,]  764
##  [50,]  821
##  [51,]  768
##  [52,]  845
##  [53,]  864
##  [54,]  862
##  [55,]  698
##  [56,]  845
##  [57,]  744
##  [58,]  796
##  [59,] 1040
##  [60,]  759
##  [61,]  781
##  [62,]  865
##  [63,]  845
##  [64,]  944
##  [65,]  984
##  [66,]  897
##  [67,]  822
##  [68,] 1010
##  [69,]  771
##  [70,]  676
##  [71,]  649
##  [72,]  846
##  [73,]  812
##  [74,]  742
##  [75,]  801
##  [76,] 1040
##  [77,]  860
##  [78,]  874
##  [79,]  848
##  [80,]  890
##  [81,]  744
##  [82,]  749
##  [83,]  838
##  [84,] 1050
##  [85,]  918
##  [86,]  986
##  [87,]  797
##  [88,]  923
##  [89,]  975
##  [90,]  815
##  [91,] 1020
##  [92,]  906
##  [93,]  901
##  [94,] 1170
##  [95,]  912
##  [96,]  746
##  [97,]  919
##  [98,]  718
##  [99,]  714
## [100,]  740</code></pre>
<pre class="r"><code># List the number of observations in the Nile dataset
length(Nile)</code></pre>
<pre><code>## [1] 100</code></pre>
<pre class="r"><code># Display the first 10 elements of the Nile dataset
head(Nile, n=10)</code></pre>
<pre><code>##          x
##  [1,] 1120
##  [2,] 1160
##  [3,]  963
##  [4,] 1210
##  [5,] 1160
##  [6,] 1160
##  [7,]  813
##  [8,] 1230
##  [9,] 1370
## [10,] 1140</code></pre>
<pre class="r"><code># Display the last 12 elements of the Nile dataset
tail(Nile, n=12)</code></pre>
<pre><code>##          x
##  [1,]  975
##  [2,]  815
##  [3,] 1020
##  [4,]  906
##  [5,]  901
##  [6,] 1170
##  [7,]  912
##  [8,]  746
##  [9,]  919
## [10,]  718
## [11,]  714
## [12,]  740</code></pre>
</div>
<div id="basic-time-series-plots" class="section level2">
<h2>1-3 Basic time series plots</h2>
<p>While simple commands such as print(), length(), head(), and tail() provide crucial information about your time series data, another very useful way to explore any data is to generate a plot.</p>
<p>In this exercise, you will plot the River Nile annual streamflow data using the plot() function. For time series data objects such as Nile, a Time index for the horizontal axis is typically included. From the previous exercise, you know that this data spans from 1871 to 1970, and horizontal tick marks are labeled as such. The default label of “Time” is not very informative. Since these data are annual measurements, you should use the label “Year”. While you’re at it, you should change the vertical axis label to “River Volume (1e9 m^{3})”.</p>
<p>Additionally, it helps to have an informative title, which can be set using the argument main. For your purposes, a useful title for this figure would be “Annual River Nile Volume at Aswan, 1871-1970”.</p>
<p>Finally, the default plotting type for time series objects is “l” for line. Connecting consecutive observations can help make a time series plot more interpretable. Sometimes it is also useful to include both the observations points as well as the lines, and we instead use “b” for both.</p>
<pre class="r"><code># Plot the Nile data
plot(Nile )</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code># Plot the Nile data with xlab and ylab arguments
plot(Nile , xlab = &quot;Year&quot;, ylab = &quot;River Volume (1e9 m^{3})&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<pre class="r"><code># Plot the Nile data with xlab, ylab, main, and type arguments
plot(Nile , xlab = &quot;Year&quot;, ylab = &quot;River Volume (1e9 m^{3})&quot;, main = &quot;Annual River Nile Volume at Aswan, 1871-1970&quot;, type =&quot;b&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-3-3.png" width="672" /></p>
</div>
<div id="what-does-the-time-index-tell-us" class="section level2">
<h2>1-4 What does the time index tell us?</h2>
<p>Some data are naturally evenly spaced by time. The time series discrete_data shown in the top figure has 20 observations, with one observation appearing at each of the discrete time indices 1 through 20. Discrete time indexing is appropriate for discrete_data.</p>
<p>The time series continuous_series shown in the bottom figure also has 20 observations, it is following the same periodic pattern as discrete_data, but its observations are not evenly spaced. Its first, second, and last observations were observed at times 1.210322, 1.746137, and 20.180524, respectively. Continuous time indexing is natural for continuous_series, however, the observations are approximately evenly spaced, with about 1 observation observed per time unit. Let’s investigate using a discrete time indexing for continuous_series.</p>
</div>
<div id="predicting-the-future" class="section level2">
<h2>2- Predicting the future</h2>
<p>In this chapter, you will conduct some trend spotting, and learn the white noise (WN) model, the random walk (RW) model, and the definition of stationary processes.</p>
</div>
<div id="correlation-analysis-and-the-autocorrelation-function" class="section level2">
<h2>3- Correlation analysis and the autocorrelation function</h2>
<p>In this chapter, you will review the correlation coefficient, use it to compare two time series, and also apply it to compare a time series with its past, as an autocorrelation. You will discover the autocorrelation function (ACF) and practice estimating and visualizing autocorrelations for time series data.</p>
</div>
<div id="autoregression" class="section level2">
<h2>4- Autoregression</h2>
<p>In this chapter, you will learn the autoregressive (AR) model and several of its basic properties. You will also practice simulating and estimating the AR model in R, and compare the AR model with the random walk (RW) model.</p>
</div>
<div id="a-simple-moving-average" class="section level2">
<h2>5- A simple moving average</h2>
<p>In this chapter, you will learn the simple moving average (MA) model and several of its basic properties. You will also practice simulating and estimating the MA model in R, and compare the MA model with the autoregressive (AR) model.</p>
<pre class="r"><code>library(tidyverse)
e &lt;- read.csv(&quot;e2.csv&quot;)
names(e)</code></pre>
<pre><code>## [1] &quot;Last.Name&quot;  &quot;First.Name&quot; &quot;Quiz.1..20&quot; &quot;Quiz.2..20&quot; &quot;Quiz.3..15&quot;
## [6] &quot;Lab.1...10&quot; &quot;Lab.2...10&quot;</code></pre>
<pre class="r"><code>e %&gt;%  pivot_longer(c(Lab.1...10,Lab.2...10)) %&gt;% 
  ggplot(aes(value,color=name))+geom_density()</code></pre>
<pre><code>## Warning: Removed 13 rows containing non-finite values (stat_density).</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>e %&gt;% mutate(q3=Quiz.3..15*20/15) %&gt;% pivot_longer(c(Quiz.1..20,Quiz.2..20,q3)) %&gt;% 
  ggplot(aes(value,color=name))+geom_density()</code></pre>
<pre><code>## Warning: Removed 23 rows containing non-finite values (stat_density).</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r"><code>Q1_m &lt;- 5*mean(e$Quiz.1..20, na.rm=TRUE)
print(paste(&quot;quiz 1: &quot;,Q1_m))</code></pre>
<pre><code>## [1] &quot;quiz 1:  57.8483606557377&quot;</code></pre>
<pre class="r"><code>Q2_m &lt;- 5*mean(e$Quiz.2..20, na.rm=TRUE)
print(paste(&quot;quiz 2: &quot;,Q2_m))</code></pre>
<pre><code>## [1] &quot;quiz 2:  70.375&quot;</code></pre>
<pre class="r"><code>Q3_m &lt;- 5*20/15*mean(e$Quiz.3..15, na.rm=TRUE)
print(paste(&quot;quiz 2: &quot;,Q3_m))</code></pre>
<pre><code>## [1] &quot;quiz 2:  79.7354497354497&quot;</code></pre>
<pre class="r"><code>Q1_max &lt;- min(e$Quiz.1..20, na.rm=TRUE)
print(paste(&quot;quiz 1: &quot;,Q1_max))</code></pre>
<pre><code>## [1] &quot;quiz 1:  4&quot;</code></pre>
<pre class="r"><code>Q2_max &lt;- min(e$Quiz.2..20, na.rm=TRUE)
print(paste(&quot;quiz 2: &quot;,Q2_max))</code></pre>
<pre><code>## [1] &quot;quiz 2:  6.5&quot;</code></pre>
<pre class="r"><code>Q3_max &lt;- 20/15*min(e$Quiz.3..15, na.rm=TRUE)
print(paste(&quot;quiz 3: &quot;,Q3_max))</code></pre>
<pre><code>## [1] &quot;quiz 3:  9.33333333333333&quot;</code></pre>
</div>
